#!/usr/bin/env bash


BASEDIR=$(dirname $0)
. $BASEDIR/inc/functions

explain "Download latest nvim"
cd /tmp
run_with_spinner "curl -L https://github.com/neovim/neovim-releases/releases/download/nightly/nvim-linux-x86_64.tar.gz | tar -C $HOME/dotfiles/bin -xz"

if [ ! -e ~/.config/nvim/spell ]; then
  explain "Spelling dictionary"
  mkdir -p ~/.config/nvim/spell
  cd ~/.config/nvim/spell
  run_with_spinner wget https://ftp.nluug.nl/vim/runtime/spell/fr.latin1.spl
  run_with_spinner wget https://ftp.nluug.nl/vim/runtime/spell/fr.latin1.sug
  run_with_spinner wget https://ftp.nluug.nl/vim/runtime/spell/fr.utf-8.spl
  run_with_spinner wget https://ftp.nluug.nl/vim/runtime/spell/fr.utf-8.sug
  run_with_spinner wget https://ftp.nluug.nl/vim/runtime/spell/en.utf-8.sug
  run_with_spinner wget https://ftp.nluug.nl/vim/runtime/spell/en.utf-8.spl
fi

# add some known_hosts for later neovim package manager git clone.
ssh-keyscan github.com >> ~/.ssh/known_hosts 2> /dev/null
# require humain input
ssh -T git@prr.re

success "[NVIM] Success"
